#!/bin/bash
#
# mpcava - start two terminal emulators, one running ncmpcpp
#          and the other running cava.
#
# I am using two separate terminal emulators as I want a smaller
# font for the cava terminal. The terminal command options are
# customized for my setup, you may need to adjust the geometry
# to get the two windows to align as desired. I wanted the cava
# terminal window at the bottom of the screen and aligned with
# the ncmpcpp terminal window. Couldn't figure out how to set
# the window title for gnome-terminal.

RETRO=
FULLSCREEN=

usage() {
    printf "\nUsage: mpcava [-f] [-r] [-u]"
    printf "\nWhere:"
    printf "\n\t-f indicates fullscreen display"
    printf "\n\t-r indicates use retro terminal emulator"
    printf "\n\t-u displays this usage message and exits\n"
    exit 1
}

while getopts "fru" flag; do
    case $flag in
        f)
            FULLSCREEN=1
            ;;
        r)
            RETRO=1
            ;;
        u)
            usage
            ;;
    esac
done

if [ "${FULLSCREEN}" ]
then
    gnome-terminal -t 'Cava Spectrum Visualizer' \
               --profile=SmallFont \
               --hide-menubar \
               --full-screen \
               -- cava &
else
    gnome-terminal -t 'Cava Spectrum Visualizer' \
               --profile=SmallFont \
               --hide-menubar \
               --geometry 360x16+150-0 \
               -- cava &
fi

sleep 4

if [ "${RETRO}" ]
then
    if [ "${FULLSCREEN}" ]
    then
        cool-retro-term --fullscreen -e ncmpcpp &
    else
        cool-retro-term -e ncmpcpp &
    fi
else
    if [ "${FULLSCREEN}" ]
    then
        xfce4-terminal --title "Music Player Client" \
               --icon=audio-player \
               --hide-menubar \
               --hide-toolbar \
               --hide-scrollbar \
               --fullscreen \
               --command="ncmpcpp" &
    else
        xfce4-terminal --title "Music Player Client" \
               --icon=audio-player \
               --hide-menubar \
               --hide-toolbar \
               --hide-scrollbar \
               --geometry 90x20+150+25 \
               --command="ncmpcpp" &
    fi
fi
